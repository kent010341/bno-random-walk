<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>BNO Random Walk</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #fff;
            cursor: pointer;
        }

        .bno {
            position: absolute;
            width: 80px;
            height: auto;
            pointer-events: auto;
            user-select: none;
        }
    </style>
</head>

<body>

    <script>
        function createBno(x, y) {
            const img = document.createElement("img");
            img.src = "assets/walk.gif";
            img.className = "bno";
            document.body.appendChild(img);

            let posX = x;
            let posY = y;

            const speed = 10;
            const interval = 50 + Math.random() * 50;

            function move() {
                const angle = Math.random() * Math.PI * 2;
                const dx = Math.cos(angle) * speed;
                const dy = Math.sin(angle) * speed;
                posX += dx;
                posY += dy;

                const w = img.offsetWidth;
                const h = img.offsetHeight;

                if (posX < 0) posX = 0;
                if (posY < 0) posY = 0;
                if (posX + w > window.innerWidth) posX = window.innerWidth - w;
                if (posY + h > window.innerHeight) posY = window.innerHeight - h;

                img.style.left = posX + "px";
                img.style.top = posY + "px";
            }

            img.style.left = posX + "px";
            img.style.top = posY + "px";

            const timer = setInterval(move, interval);

            img.addEventListener("click", (e) => {
                e.stopPropagation();
                clearInterval(timer);
                img.remove();
            });
        }

        document.addEventListener("click", (event) => {
            createBno(event.clientX, event.clientY);
        });

        // create one BNO at init
        createBno(window.innerWidth / 2, window.innerHeight / 2);

        window.addEventListener("resize", () => {
            document.querySelectorAll(".bno").forEach(img => {
                const x = Math.min(parseInt(img.style.left), window.innerWidth - img.offsetWidth);
                const y = Math.min(parseInt(img.style.top), window.innerHeight - img.offsetHeight);
                img.style.left = x + "px";
                img.style.top = y + "px";
            });
        });
    </script>

</body>

</html>